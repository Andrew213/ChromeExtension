const h="/assets/hh.png",m="/assets/sj.png",o={hh:"hh",sj:"sj",unknown:"unknown"},g=[{id:o.hh,name:"HeadHunter",match:t=>t==="hh.ru"||t.endsWith(".hh.ru"),img:h,subtitle:"Режим: hh.ru"},{id:o.sj,name:"SuperJob",match:t=>t==="superjob.ru"||t.endsWith(".superjob.ru"),img:m,subtitle:"Режим: superjob.ru"}];function l(t){return t=(t||"").toLowerCase().trim(),t.startsWith("www.")?t.slice(4):t}function a(t){const e=l(t);return g.find(r=>r.match&&r.match(e))||{id:o.unknown,name:"Unknown",img:"images/unknown.png",subtitle:"Сайт не поддержан"}}async function u(){const[t]=await chrome.tabs.query({active:!0,currentWindow:!0}),e=t?.url||"";let s="";try{s=e?new URL(e).host:""}catch{s=""}return s}const n=t=>document.getElementById(t),i=n("speedRange"),p=n("speedBadge"),b=n("startBtn"),w=n("stopBtn"),f=n("testBtn"),y=n("refreshBtn"),c=n("coverLetter");Number(i.value);b.onclick=async()=>{const t=await u(),e=a(t);e.id!==o.unknown&&(e.id,o.hh,e.id,o.sj,chrome.tabs.query({active:!0,currentWindow:!0},async s=>{const[r]=s;r.id&&(console.log({responseLetter:c.value}),chrome.tabs.sendMessage(r.id,{type:"START_HH",settings:{speed:3,responseLetter:c?.value||""}}))}))};w.onclick=()=>chrome.runtime.sendMessage({type:"STOP"});f.onclick=()=>chrome.runtime.sendMessage({type:"RUN_TEST_STEP"});y.onclick=d;i.addEventListener("input",()=>{const t=i.value;p.textContent=t});async function d(){const t=await u(),e=a(t);n("siteName").textContent=e.name,n("hostText").textContent=t||"—",n("siteSubtitle").textContent=e.subtitle,n("siteImage").src=chrome.runtime.getURL(e.img),n("siteImage").title=e.id}d();
